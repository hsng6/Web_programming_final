<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸ìˆ– - ì¿ í°</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <a href="index.html" class="logo">
            <h1>ì¸ìˆ–</h1>
        </a>
        <nav>
            <a href="index.html">í™ˆ</a>
            <a href="ai-fit.html" class="ai-fit-link">ğŸ¤– AI í•</a>
            <a href="mypage.html">ë§ˆì´í˜ì´ì§€</a>
            <a href="orders.html">ì£¼ë¬¸ë‚´ì—­</a>
            <a href="support.html">ê³ ê°ì„¼í„°</a>
            <a href="wishlist.html" class="wishlist-link">â¤ï¸ ì°œ</a>
            <a href="cart.html" class="cart-link">ğŸ›’ ì¥ë°”êµ¬ë‹ˆ</a>
            <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()">ğŸŒ™</button>
        </nav>
    </header>

    <main class="coupons-container">
        <h2>ğŸ« ì¿ í°í•¨</h2>

        <!-- ì¿ í° ì…ë ¥ ì„¹ì…˜ -->
        <section class="coupon-input-section">
            <h3>ì¿ í° ì½”ë“œ ì…ë ¥</h3>
            <div class="coupon-input-box">
                <input type="text" id="coupon-code-input" placeholder="ì¿ í° ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                <button onclick="registerCoupon()">ë“±ë¡</button>
            </div>
        </section>

        <!-- ì‚¬ìš© ê°€ëŠ¥í•œ ì¿ í° -->
        <section class="available-coupons-section">
            <h3>ì‚¬ìš© ê°€ëŠ¥í•œ ì¿ í° (<span id="available-count">0</span>ì¥)</h3>
            <div id="available-coupons-list" class="coupons-grid">
                <!-- Available coupons will be loaded here -->
            </div>
        </section>

        <!-- ì‚¬ìš©ëœ ì¿ í° -->
        <section class="used-coupons-section">
            <h3>ì‚¬ìš©í•œ ì¿ í° (<span id="used-count">0</span>ì¥)</h3>
            <div id="used-coupons-list" class="coupons-grid">
                <!-- Used coupons will be loaded here -->
            </div>
        </section>

        <!-- ë§Œë£Œëœ ì¿ í° -->
        <section class="expired-coupons-section">
            <h3>ë§Œë£Œëœ ì¿ í° (<span id="expired-count">0</span>ì¥)</h3>
            <div id="expired-coupons-list" class="coupons-grid">
                <!-- Expired coupons will be loaded here -->
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 ì¸ìˆ–. All rights reserved.</p>
    </footer>

    <script src="main.js"></script>
    <script>
        // ì¿ í° ì‹œìŠ¤í…œ ì´ˆê¸°í™”
        function initializeCoupons() {
            const defaultCoupons = [
                {
                    code: 'WELCOME2025',
                    name: 'ì‹ ê·œ íšŒì› í™˜ì˜ ì¿ í°',
                    discount: 5000,
                    type: 'fixed',
                    minPurchase: 30000,
                    expiryDate: '2025-12-31',
                    used: false
                },
                {
                    code: 'WINTER20',
                    name: 'ê²¨ìš¸ ì‹œì¦Œ 20% í• ì¸',
                    discount: 20,
                    type: 'percent',
                    minPurchase: 50000,
                    expiryDate: '2025-12-31',
                    used: false
                },
                {
                    code: 'FIRSTBUY',
                    name: 'ì²« êµ¬ë§¤ ê°ì‚¬ ì¿ í°',
                    discount: 10000,
                    type: 'fixed',
                    minPurchase: 50000,
                    expiryDate: '2025-12-31',
                    used: false
                },
                {
                    code: 'NEWYEAR2025',
                    name: 'ìƒˆí•´ íŠ¹ë³„ ì¿ í°',
                    discount: 15000,
                    type: 'fixed',
                    minPurchase: 80000,
                    expiryDate: '2026-01-31',
                    used: false
                },
                {
                    code: 'HOLIDAY30',
                    name: 'ì—°ë§ ì‹œì¦Œ 30% í• ì¸',
                    discount: 30,
                    type: 'percent',
                    minPurchase: 100000,
                    expiryDate: '2025-12-31',
                    used: false
                },
                {
                    code: 'LUCKY7777',
                    name: 'ëŸ­í‚¤ì„¸ë¸ í–‰ìš´ì˜ ì¿ í°',
                    discount: 7777,
                    type: 'fixed',
                    minPurchase: 40000,
                    expiryDate: '2026-02-28',
                    used: false
                },
                {
                    code: 'MEGA50',
                    name: 'ë©”ê°€ì„¸ì¼ 50% í• ì¸',
                    discount: 50,
                    type: 'percent',
                    minPurchase: 150000,
                    expiryDate: '2025-12-31',
                    used: false
                },
                {
                    code: 'BIRTHDAY3000',
                    name: 'ìƒì¼ ì¶•í•˜ ì¿ í°',
                    discount: 3000,
                    type: 'fixed',
                    minPurchase: 20000,
                    expiryDate: '2026-03-31',
                    used: false
                }
            ];

            const existingCoupons = JSON.parse(localStorage.getItem('userCoupons'));
            if (!existingCoupons || existingCoupons.length === 0) {
                localStorage.setItem('userCoupons', JSON.stringify(defaultCoupons));
            }
        }

        function loadCoupons() {
            const coupons = JSON.parse(localStorage.getItem('userCoupons')) || [];
            const today = new Date();

            const available = coupons.filter(c => !c.used && new Date(c.expiryDate) >= today);
            const used = coupons.filter(c => c.used);
            const expired = coupons.filter(c => !c.used && new Date(c.expiryDate) < today);

            document.getElementById('available-count').textContent = available.length;
            document.getElementById('used-count').textContent = used.length;
            document.getElementById('expired-count').textContent = expired.length;

            renderCoupons('available-coupons-list', available, 'available');
            renderCoupons('used-coupons-list', used, 'used');
            renderCoupons('expired-coupons-list', expired, 'expired');
        }

        function renderCoupons(containerId, coupons, status) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            if (coupons.length === 0) {
                container.innerHTML = '<p class="empty-message">ì¿ í°ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            coupons.forEach(coupon => {
                const couponCard = document.createElement('div');
                couponCard.className = `coupon-card ${status}`;

                const discountText = coupon.type === 'fixed'
                    ? `${coupon.discount.toLocaleString()}ì›`
                    : `${coupon.discount}%`;

                const minPurchaseText = coupon.minPurchase
                    ? `${coupon.minPurchase.toLocaleString()}ì› ì´ìƒ êµ¬ë§¤ ì‹œ`
                    : 'ì œí•œ ì—†ìŒ';

                couponCard.innerHTML = `
                    <div class="coupon-header">
                        <div class="coupon-discount">${discountText}</div>
                        <div class="coupon-status-badge">${status === 'available' ? 'ì‚¬ìš©ê°€ëŠ¥' : status === 'used' ? 'ì‚¬ìš©ì™„ë£Œ' : 'ê¸°ê°„ë§Œë£Œ'}</div>
                    </div>
                    <div class="coupon-body">
                        <h4 class="coupon-name">${coupon.name}</h4>
                        <p class="coupon-condition">${minPurchaseText}</p>
                        <p class="coupon-code">ì½”ë“œ: <strong>${coupon.code}</strong></p>
                        <p class="coupon-expiry">ìœ íš¨ê¸°ê°„: ${coupon.expiryDate}ê¹Œì§€</p>
                    </div>
                    ${status === 'available' ? `<button class="btn-copy-code" onclick="copyCouponCode('${coupon.code}')">ì½”ë“œ ë³µì‚¬</button>` : ''}
                `;
                container.appendChild(couponCard);
            });
        }

        function registerCoupon() {
            const codeInput = document.getElementById('coupon-code-input');
            const code = codeInput.value.trim().toUpperCase();

            if (!code) {
                alert('ì¿ í° ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const coupons = JSON.parse(localStorage.getItem('userCoupons')) || [];

            // ì´ë¯¸ ë“±ë¡ëœ ì¿ í°ì¸ì§€ í™•ì¸
            if (coupons.some(c => c.code === code)) {
                alert('ì´ë¯¸ ë“±ë¡ëœ ì¿ í°ì…ë‹ˆë‹¤.');
                codeInput.value = '';
                return;
            }

            // ì‚¬ìš© ê°€ëŠ¥í•œ ì¿ í° ì½”ë“œ ëª©ë¡
            const availableCouponCodes = {
                'SPECIAL50': {
                    name: 'íŠ¹ë³„ í• ì¸ 50% ì¿ í°',
                    discount: 50,
                    type: 'percent',
                    minPurchase: 100000,
                    expiryDate: '2025-12-31'
                },
                'VIP10000': {
                    name: 'VIP ê³ ê° ì „ìš© ì¿ í°',
                    discount: 10000,
                    type: 'fixed',
                    minPurchase: 50000,
                    expiryDate: '2025-12-31'
                },
                'FREESHIP': {
                    name: 'ë¬´ë£Œ ë°°ì†¡ ì¿ í°',
                    discount: 3000,
                    type: 'fixed',
                    minPurchase: 0,
                    expiryDate: '2025-12-31'
                },
                'SURPRISE30': {
                    name: 'ê¹œì§ 30% í• ì¸',
                    discount: 30,
                    type: 'percent',
                    minPurchase: 70000,
                    expiryDate: '2025-12-31'
                },
                'FASHION15': {
                    name: 'íŒ¨ì…˜ìœ„í¬ 15% í• ì¸',
                    discount: 15,
                    type: 'percent',
                    minPurchase: 60000,
                    expiryDate: '2026-01-31'
                },
                'SUPER20000': {
                    name: 'ìŠˆí¼íŠ¹ê°€ 20,000ì› í• ì¸',
                    discount: 20000,
                    type: 'fixed',
                    minPurchase: 100000,
                    expiryDate: '2026-02-28'
                },
                'FRIEND5000': {
                    name: 'ì¹œêµ¬ì¶”ì²œ 5,000ì› ì¿ í°',
                    discount: 5000,
                    type: 'fixed',
                    minPurchase: 30000,
                    expiryDate: '2026-03-31'
                },
                'STUDENT10': {
                    name: 'í•™ìƒ í• ì¸ 10% ì¿ í°',
                    discount: 10,
                    type: 'percent',
                    minPurchase: 40000,
                    expiryDate: '2026-02-28'
                },
                'THANKS25': {
                    name: 'ê°ì‚¬ 25% í• ì¸',
                    discount: 25,
                    type: 'percent',
                    minPurchase: 80000,
                    expiryDate: '2025-12-31'
                },
                'PREMIUM15000': {
                    name: 'í”„ë¦¬ë¯¸ì—„ 15,000ì› í• ì¸',
                    discount: 15000,
                    type: 'fixed',
                    minPurchase: 90000,
                    expiryDate: '2026-01-31'
                },
                'REVIEW3000': {
                    name: 'ë¦¬ë·°ì‘ì„± ê°ì‚¬ ì¿ í°',
                    discount: 3000,
                    type: 'fixed',
                    minPurchase: 20000,
                    expiryDate: '2026-03-31'
                },
                'EARLYBIRD': {
                    name: 'ì–¼ë¦¬ë²„ë“œ íŠ¹ê°€',
                    discount: 12000,
                    type: 'fixed',
                    minPurchase: 60000,
                    expiryDate: '2026-01-15'
                },
                'FLASH40': {
                    name: 'í”Œë˜ì‹œ ì„¸ì¼ 40% í• ì¸',
                    discount: 40,
                    type: 'percent',
                    minPurchase: 120000,
                    expiryDate: '2025-12-31'
                },
                'COMEBACK8000': {
                    name: 'ì»´ë°± ê³ ê° 8,000ì› í• ì¸',
                    discount: 8000,
                    type: 'fixed',
                    minPurchase: 50000,
                    expiryDate: '2026-02-28'
                },
                'LOYALTY35': {
                    name: 'ì¶©ì„±ê³ ê° 35% í• ì¸',
                    discount: 35,
                    type: 'percent',
                    minPurchase: 100000,
                    expiryDate: '2026-01-31'
                }
            };

            if (availableCouponCodes[code]) {
                const newCoupon = {
                    code: code,
                    ...availableCouponCodes[code],
                    used: false
                };
                coupons.push(newCoupon);
                localStorage.setItem('userCoupons', JSON.stringify(coupons));
                alert(`âœ… "${newCoupon.name}" ì¿ í°ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!`);
                codeInput.value = '';
                loadCoupons();
            } else {
                alert('âŒ ìœ íš¨í•˜ì§€ ì•Šì€ ì¿ í° ì½”ë“œì…ë‹ˆë‹¤.');
                codeInput.value = '';
            }
        }

        function copyCouponCode(code) {
            navigator.clipboard.writeText(code).then(() => {
                alert(`ì¿ í° ì½”ë“œ "${code}"ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ê²°ì œ ì‹œ ì‚¬ìš©í•˜ì„¸ìš”.`);
            });
        }

        // í…Œë§ˆ ë¡œë“œ
        function loadTheme() {
            const isDark = localStorage.getItem('theme') === 'dark';
            if (isDark) {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-toggle').textContent = 'â˜€ï¸';
            }
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            document.getElementById('theme-toggle').textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        document.addEventListener('DOMContentLoaded', function () {
            loadTheme();
            initializeCoupons();
            loadCoupons();
        });
    </script>
</body>

</html>